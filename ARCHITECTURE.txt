╔════════════════════════════════════════════════════════════════════════════════╗
║                            DESKBOT ARCHITECTURE                                ║
╚════════════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────────┐
│                              USER INTERFACE LAYER                            │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃                         GUI (CustomTkinter)                         ┃  │
│  ┃  ┌────────────────────────────────────────────────────────────┐    ┃  │
│  ┃  │              Animated Eyes Canvas                         │    ┃  │
│  ┃  │  • Smooth eye movement (interpolation)                    │    ┃  │
│  ┃  │  • Automatic blinking (every 3 seconds)                   │    ┃  │
│  ┃  │  • Expression changes (normal/happy/talking)              │    ┃  │
│  ┃  │  • 60 FPS animation loop                                  │    ┃  │
│  ┃  └────────────────────────────────────────────────────────────┘    ┃  │
│  ┃  [Start Listening Button]  [Quit Button]                           ┃  │
│  ┃  Status: "Ready" / "Listening..." / "Processing..."                ┃  │
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    ↕                                         │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                          APPLICATION LOGIC LAYER                             │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃                         Main Controller                             ┃  │
│  ┃                            (main.py)                                ┃  │
│  ┃  • Initializes all modules                                          ┃  │
│  ┃  • Manages threading                                                ┃  │
│  ┃  • Coordinates communication                                        ┃  │
│  ┃  • Handles lifecycle                                                ┃  │
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    ↕                                         │
│  ┌───────────────────┬───────────────────┬───────────────────┐              │
│  ↓                   ↓                   ↓                   ↓              │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                            MODULE LAYER (Threaded)                           │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Thread 1:                Thread 2:                Thread 3:                │
│  ┏━━━━━━━━━━━━━━━┓       ┏━━━━━━━━━━━━━━━┓       ┏━━━━━━━━━━━━━━━┓        │
│  ┃ Voice Input   ┃       ┃ Face Tracking ┃       ┃ Main GUI Loop ┃        │
│  ┗━━━━━━━━━━━━━━━┛       ┗━━━━━━━━━━━━━━━┛       ┗━━━━━━━━━━━━━━━┛        │
│                                                                              │
│  ┌─────────────────┐     ┌─────────────────┐                               │
│  │ Microphone      │     │ Camera          │                               │
│  │ Calibration     │     │ Capture (30fps) │                               │
│  └────────┬────────┘     └────────┬────────┘                               │
│           ↓                       ↓                                         │
│  ┌─────────────────┐     ┌─────────────────┐                               │
│  │ Speech          │     │ Face Detection  │                               │
│  │ Recognition     │     │ (Haar Cascade)  │                               │
│  └────────┬────────┘     └────────┬────────┘                               │
│           ↓                       ↓                                         │
│  ┌─────────────────┐     ┌─────────────────┐                               │
│  │ Text Output     │     │ Position        │                               │
│  │                 │     │ Normalization   │                               │
│  └────────┬────────┘     └────────┬────────┘                               │
│           ↓                       ↓                                         │
│           └──────────┬────────────┘                                         │
│                      ↓                                                      │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                           PROCESSING LAYER                                   │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃                      OpenAI Integration                             ┃  │
│  ┃  ┌────────────────────────────────────────────────────────────┐    ┃  │
│  ┃  │  System Prompt: Friendly desktop companion personality     │    ┃  │
│  ┃  │  Model: GPT-3.5-turbo                                      │    ┃  │
│  ┃  │  Conversation History: Last 19 messages                    │    ┃  │
│  ┃  │  Temperature: 0.7 (balanced creativity)                    │    ┃  │
│  ┃  └────────────────────────────────────────────────────────────┘    ┃  │
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    ↓                                         │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│                            OUTPUT LAYER                                      │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓  │
│  ┃                      Text-to-Speech (pyttsx3)                       ┃  │
│  ┃  • Offline TTS engine                                               ┃  │
│  ┃  • Configurable rate (150 wpm)                                      ┃  │
│  ┃  • Configurable volume (0.9)                                        ┃  │
│  ┃  • Auto voice selection                                             ┃  │
│  ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛  │
│                                    ↓                                         │
│                              [SPEAKERS]                                      │
└──────────────────────────────────────────────────────────────────────────────┘

╔════════════════════════════════════════════════════════════════════════════════╗
║                            DATA FLOW SUMMARY                                   ║
╚════════════════════════════════════════════════════════════════════════════════╝

  USER SPEAKS → Microphone → Speech Recognition → Text
                                                    ↓
                                            OpenAI API
                                                    ↓
                                              Response
                                                    ↓
                  Speakers ← Text-to-Speech ← Response Text

  USER FACE → Camera → Face Detection → Position → Eye Movement Animation

╔════════════════════════════════════════════════════════════════════════════════╗
║                            CONFIGURATION                                       ║
╚════════════════════════════════════════════════════════════════════════════════╝

  Environment Variables (.env):
  • OPENAI_API_KEY - Your OpenAI API key (required)
  • WAKE_WORD - Wake phrase (default: "hey deskbot")
  • VOICE_ENABLED - Enable/disable voice (default: true)
  • FACE_TRACKING_ENABLED - Enable/disable tracking (default: true)

